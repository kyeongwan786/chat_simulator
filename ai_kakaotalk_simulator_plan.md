# AI 연애 카톡 시뮬레이터 & 실전 카톡 대본 코치
# 프로젝트 기획안 v1.1 (확장판 – 상황/카테고리 상세 추가)
---

## 1. 서비스 한 줄 정의 & 컨셉
### 1-1. 한 줄 정의
“AI 연애 카톡 시뮬레이터 + 실전 카톡 대본 코치 서비스”

유저가 가상의 상대와 카톡으로 연애 상황을 연습하고,
실제 카톡 문장까지 AI가 대신 다듬어주는 **대화 실전 트레이너**.

### 1-2. 시작 포커스
- 연애·썸·소개팅·고백·권태기 등 **연애 카톡**에 집중

### 1-3. 향후 확장 방향
- 직장 커뮤니케이션 / 인간관계 / 갈등 조정 / 사과문 / 보고 / 설득 대본까지 확장
- 최종 목표: **말투·대본·전략까지 해주는 인간관계 코치 플랫폼**

---

## 2. 타겟 & 페르소나
### 2-1. 1차 타겟 (연애·썸 중심)
- 썸/연애 경험 적은 20대 초중반
- “뭐라고 답장해야 하지?” 매번 친구에게 물어봄
- 감정·온도 조절 어려움 (너무 직설적 or 너무 소극적)
- 말투 센스 부족 (딱딱/장문/맘과 다르게 전달됨)
- “읽씹” 이유 못 찾는 사람
- 연애 심리 콘텐츠는 많이 봐도 **내 문장**에 대한 피드백은 없음

### 2-2. 2차 타겟 (확장)
- 직장인(상사·동료·후배와의 톤 조절 필요)
- 친구·가족과의 갈등 대화
- 영업/고객 상담 메시지

---

## 3. 유저가 실제로 겪는 문제 정의
- “뭐라고 보내야 할지 모르겠다” (첫 연락, 소개팅 후 연락, 고백 전후, 사과, 이별 등)
- “내 말투가 뭐가 문제인지 모르겠다” (상대가 차가워짐 → 이유 모름)
- 연애 콘텐츠는 많지만 ‘내 상황’에 적용 불가
- 실전 연습할 상대 없음 / 망하기 싫음

---

## 4. 서비스 핵심 가치 제안 (Value Proposition)
- 실전 같은 카톡 연애 시뮬레이션
- 내가 쓰는 문장을 AI가 바로 코치해줌
- 상황별/단계별 대본 제공
- 게임처럼 반복 플레이로 감각을 습득

---

## 5. 서비스 구조 (버전/단계별)
### 5-1. V1 (MVP) – 연애 카톡 시뮬레이터 + 기본 코치
#### 5-1-1. 목표
연애 카톡 연습의 재미 + 내 멘트 코칭 경험 제공

#### 5-1-2. 핵심 기능
- 상황 선택 (스토리 라인 존재)
- AI 캐릭터 선택 (성격/호감도/선호 멘트 차등)
- 카톡 화면 UI
- 유저 입력 → AI 답변 + 코치 패널
- 호감도·태그·턴 로그 시스템
- 엔딩 구조 (A/B/C + BAD END)
- 엔딩 도감 수집 요소

### 5-2. V2 – 실전 카톡 대본 코치 (복붙 분석)
- 실제 카톡 복붙 → 분석
- 분위기/주도권/호감도 분석
- 문장별 피드백 & 수정 멘트 제공
- 다음 멘트 추천
- 히스토리/패턴 분석 기능
- 주간 리포트 + 뱃지 시스템

### 5-3. V3 – 인간관계·직장 커뮤니케이션 확장
- 탭 구조: [연애] [직장] [친구/가족] [기타]
- 보고/사과/설득/갈등 조정 등 포함

---

## 6. 화면/페이지 구조
### 6-1. 랜딩 페이지
- 서비스 설명 / 대표 기능 / 사용법 3단계
- 예시 시나리오 / FAQ / 개인정보 안내
- 1턴 무료 체험 버튼

### 6-2. 상황 선택 페이지
카테고리 탭 확장:
- 연애
- 소개팅
- 썸
- 커플
- 재회
- 갈등/싸움
- 권태기
- 이별/정리
- 직장
- 친구/가족
- 기타(생활/부탁/대화유지)

각 상황 카드: 난이도(쉬움/애매/고난도) + 예상 플레이 시간 표시

### 6-3. 시뮬레이터 페이지
- AI 프로필 / 호감도 / 턴 수
- 말풍선 UI
- 선택지 버튼 (특정 턴)
- 코치 패널 (피드백/추천 멘트/태그 로그)
- 입력창 + 추천 버튼 + 되돌리기 + 패스

### 6-4. 결과 리포트 페이지
- 대화 요약 / 점수(호감도·안정감·재치)
- 강점/개선점
- 다음 멘트 가이드
- 엔딩 유형 표시 + 해금 안내

### 6-5. 실전 카톡 코치 페이지
- 붙여넣기 입력
- 전체 분석 + 문장별 피드백
- 다음 멘트 추천
- “좋았던 문장” / “아쉬운 문장” 탭
- 히스토리 비교

### 6-6. 콘텐츠 페이지
- 가이드: 고백 타이밍, 템포 가이드, 질문 리스트 등

---

## 7. 수익 모델 기획
### 7-1. 무료
- 기본 시나리오 2~3개
- 일일 제한(1~2판)
- 기본 피드백

### 7-2. 유료
- 고급 시나리오/캐릭터
- 재회/권태기/잠수/환승 의심 등 고난도 상황
- 실전 카톡 분석 기능
- PDF 리포트
- 광고 제거

### 7-3. 과금 구조
- Basic(4,900원), Pro(9,900원)
- 단일 패키지: 고백/사과/재회 등
- 되돌리기 티켓 / 멘트팩 / 프리미엄 캐릭터

---

## 8. 핵심 지표
- DAU/WAU
- 평균 턴 수
- 리포트 조회 완주율
- 유료 기능 클릭률
- 실전 코칭 재사용률
- 공유 버튼 클릭률
- 엔딩/캐릭터 해금률

---

## 9. 리스크 & 정책
- 개인정보 마스킹
- 스토킹/폭력/성적/혐오 멘트 차단
- 가스라이팅 방지
- 책임 고지
- 과몰입 방지 장치

---

## 10. 서비스 요약
“연애 경험 적은/불안한 사람들을 위해 실제 상황을 카톡 형식으로 연습시키고,
멘트를 AI가 다듬어주는 실전형 연애 코치.”

향후 모든 인간관계 코치 플랫폼으로 확장 가능.

---

## 11. 게임적 요소(정리)
- 호감도 게이지(0~100%) + 구간 연출
- BAD END: 대화방을 나감
- 엔딩(A/B/C/BAD) + 도감 시스템
- 캐릭터별 친밀도 레벨링
- 일일/주간 미션
- 되돌리기 티켓/힌트 강화
- 유저 프로필 레벨/성향 태그

---

## 12. 추가 기능 아이디어
- 멘트 라이브러리(즐겨찾기 가능)
- “연습 → 실전” 연계 기능
- 월별 타임라인 리포트
- 익명 사례 커뮤니티(향후)

---

# 13. 확장된 카테고리 & 상황 리스트업 (상세 버전)
아래는 실제 MVP 이후까지 고려한 **완성형 상황 리스트**.
각 카테고리는 앱 내부 카드로 표시되며 난이도 포함.

---
## 📌 A. 소개팅 카테고리
### 기본 상황
1) 소개팅 후 첫 연락
2) 소개팅 다음날 연락 타이밍 잡기
3) 첫 만남 이후 자연스럽게 대화 시작하기
4) 연락 템포 잡기(속도 조절)
5) 첫 데이트 약속 잡기

### 고급 상황
6) 소개팅에서 호감은 느꼈지만 상대 반응이 애매함
7) 상대가 답장이 느림(읽씹 포함)
8) 소개팅 후 며칠 지나서 다시 연락 시도
9) 소개팅 이후 분위기 유지 실패 → 복구하기
10) 소개팅에서 한 말 때문에 오해받은 상황 풀기

---
## 📌 B. 썸 카테고리
### 기본 상황
1) 매일 대화 이어가기
2) 관심사 질문 자연스럽게 섞기
3) 서로 호감 확인되는 분위기 만들기
4) 아침/밤마다 가벼운 톤 유지

### 고급 상황
5) 상대가 조금 식은 느낌일 때 대응
6) 너무 들이대지 않으면서 호감 표현하기
7) 온라인 데이트 제안하기
8) 상대가 바빠서 대화 템포 느릴 때
9) 장난/플러팅을 자연스럽게 넣기
10) 결정적 질문(“주말에 시간 있어?”) 자연스럽게 던지기

---
## 📌 C. 커플 카테고리
### 기본 상황
1) 애인과의 일상 톡
2) 데이트 일정 조율
3) 칭찬/격려 멘트
4) 건강한 체크인 메시지

### 고급 상황
5) 서운한 점 부드럽게 말하기
6) 상대의 서운함 받아주기
7) 바빠서 연락 못할 때 상황 설명하기
8) 예민한 날 대화 템포 조절
9) 큰 결정(여행/기념일) 논의하기
10) 권태기 초기 신호 잡고 대처하기

---
## 📌 D. 갈등/싸움 카테고리
### 기본 상황
1) 가벼운 오해 풀기
2) 늦은 답장 사과하기
3) 데이트 펑크 사과
4) 서로 감정 상한 상황

### 고급 상황
5) 큰 싸움 이후 첫 카톡
6) 말투 때문에 감정 상함 → 복구하기
7) 잘못 인정해야 하는 상황
8) 상대가 화났지만 이유를 정확히 모름
9) 냉전 1~3일 차
10) 상대의 차가운 답장 복구

---
## 📌 E. 고백 카테고리
### 기본 상황
1) 고백 타이밍 잡기
2) 고백 전날 톤 맞추기
3) 고백 멘트 다듬기

### 고급 상황
4) 고백 후 상대 답장이 늦을 때
5) ‘고백 실패’ 이후 관계 유지 전략
6) 고백 거절했는데 관계 유지하기
7) 상대가 고백할 듯 말 듯한 상황 읽기

---
## 📌 F. 재회/권태기 카테고리
### 기본 상황
1) 잠수 이후 다시 연락하기
2) 권태기 이후 감정 회복 톡
3) 헤어진 전 애인에게 연락할지 말지 판단
4) 가벼운 안부 연락 시도

### 고급 상황
5) 재회 시도 1턴 멘트 설계
6) 상대의 새로운 연인 존재 여부 탐색
7) 과거 싸움 회고 + 사과
8) “우리 이야기 좀 해볼래?” 자연스럽게 꺼내기
9) 재회 성공 후 건강한 관계 유지 톡

---
## 📌 G. 이별/정리 카테고리
1) 감정 상하지 않는 정리 멘트
2) 정리 통보 받았을 때 대응
3) 이별 뒤 연락 끊기/정리 멘트
4) 남아있는 물건 전달 관련 톡
5) 매듭짓기 위한 마지막 대화

---
## 📌 H. 직장 카테고리
### 기본 상황
1) 상사에게 보고하기
2) 업무 지연 사과
3) 일정 재조율
4) 회의/자료 요청
5) 고객/파트너에게 기본 연락

### 고급 상황
6) 상사의 부정적 피드백 대응
7) 동료와 갈등 톡
8) 팀원에게 업무 분배 요청
9) 예민한 업무조율(야근·업무량 이슈)
10) 퇴사 통보·인수인계 톤 조절

---
## 📌 I. 친구/가족 카테고리
1) 멀어진 친구에게 안부 연락
2) 약속 취소 사과
3) 가족 부탁/사과/감사 톡
4) 친구와 갈등 생겼을 때 톤
5) 금전/부탁/거절 메시지

---
## 📌 J. 기타(생활/대화 유지)
1) 날씨/일상 대화 자연스럽게 열기
2) 상대 취향 끌어내는 질문 모음
3) 대화가 끊겼을 때 자연스러운 리오프닝 멘트
4) 경제적 부담(밥값/데이트 비용) 완화 멘트
5) 상대 감정 케어 멘트

---

## 14. 각 상황별 스토리라인 예시 (대표 10개)
※ MVP에 바로 적용 가능한 완성도 기준

1) 소개팅 이후 첫 연락
- "오늘 만나서 반가웠어요 :) 집 잘 들어가셨죠?" → 분위기 따라 분기

2) 읽씹 8시간 후 재연락
- 이유 불명 상황 → 톤 조절 + 리스크 회피 전략 적용

3) 썸 단계: 첫 데이트 약속
- 늘어지는 대화 → 확실한 제안 생성

4) 썸 흔들림: 상대 톤 차가움
- 상대 피곤/감정 식음 두 가지 분기 제공

5) 고백 직전 대화
- 플러팅·안정감·리스크 완화 요소 혼합

6) 고백 후 불안감 조절
- 상대의 텐션에 따라 멘트 완전 달라짐

7) 싸움 직후: 화해 1턴
- 감정 완화 기준 멘트 + 사과 포맷 제공

8) 권태기 2달차 톤 복구
- 진지/가벼움 분기 포함

9) 재회 연락 1턴
- 과거 감정 건드리지 않는 안전한 도입부 설계

10) 직장 상사에게 일정 지연 보고
- 책임 인정 + 대안 제시 템플릿 포함

---

# === 모든 요구사항 통합한 완성 기획안 ===
위 문서는 네가 요청한 모든 내용(기존 기획안 + 확장 카테고리 + 상황 리스트 + 스토리라인 예시)을 **한 줄도 생략 없이** 포함하여 작성된 최종 통합 버전.


---

# AI 연애 카톡 시뮬레이터 & 실전 카톡 대본 코치 
## 개발 기획서 v1.0 (Flutter + Firebase + Python)

> 기준 문서: 상단의 **프로젝트 기획안 v1.1(확장판)** 전 내용 + 아래 개발 기획서.  
> 이 문서는 "그 기능들을 어떤 구조/코드로 구현할 것인가"에 대한 **개발 관점 설계서**.

---

## 1. 기술 스택 & 역할 정의

### 1-1. 메인 스택
- **클라이언트**: Flutter (iOS / Android / Web 가능성 열어둠)
- **인프라/백엔드 베이스**: Firebase
  - Auth (로그인/회원관리)
  - Firestore (실시간 DB)
  - Storage (PDF, 이미지, 리포트 저장)
  - Cloud Functions 트리거 (HTTP / Firestore / Schedule)
  - Cloud Messaging (푸시 알림)
- **AI 백엔드**: Python
  - 실행 환경: Google Cloud Functions / Cloud Run (Firebase와 연동)
  - 라이브러리: `openai`, `pydantic`(스키마 검증), `langchain`(옵션), `fastapi` or Flask (HTTP 서버 형태일 경우)

### 1-2. Python을 써야 하는 곳 vs 안 써도 되는 곳

#### 🔴 Python 비추 / Firebase로 처리할 영역 (인프라/기초공사)
- 로그인 기능 (회원가입/로그인/로그아웃, 소셜 로그인)
- 채팅 실시간 전송/동기화 기능
- 데이터베이스 연결 관리/트랜잭션
- 서버 인증/보안/토큰 검증 로직
- 단순 카운트/레벨/뱃지 업데이트 (숫자 증가/조건 체크)

→ 이 부분은 **Firebase(Auth + Firestore + Security Rules)**로 처리.  
Python으로 직접 서버(FastAPI 등) 짜면 인프라/보안/스케일 관리까지 다 떠안아야 해서 비효율.

#### 🟢 Python 강추(필수) 영역 (AI 두뇌)
- ChatGPT API 호출 및 프롬프트 조합
- 유저 말투/패턴 분석 (장문/직설/공감 부족 등 태그)
- 감정/분위기 분석 (긍정/부정/애매/긴장 등)
- 호감도 점수 계산에 필요한 고급 규칙/LLM 조합
- 실전 카톡 복붙 분석 + 문장별 수정 제안
- 주간 리포트 요약 텍스트 자동 생성

→ 여기서는 Python + openai + (선택) langchain 조합이 가장 유리.

### 1-3. "Firebase + Python" 조합 구조 요약

- **Flutter (앱)**: UI, 네비게이션, 입력/렌더링, 상태관리
- **Firebase (인프라)**: 로그인, 데이터 저장, 리얼타임, 보안, 푸시
- **Python Cloud Functions**: AI 로직 전용 서버
  - Flutter → Firebase Auth 토큰 획득
  - AI 호출 시 HTTP 헤더에 토큰 첨부
  - Python 서버에서 토큰 검증 후 openai 호출
  - 응답을 가공하여 Flutter로 JSON 반환

이 구조로:
- 서버 세팅/운영/보안 = Firebase & GCP가 담당
- 우리는 **Python에서 AI 로직만 집중**해서 즐겁게 짤 수 있음.

---

## 2. 전체 시스템 아키텍처

### 2-1. 상위 구조 다이어그램 (개념)

1. **Flutter App**
   - 화면: 랜딩/로그인, 상황 선택, 시뮬레이터, 결과 리포트, 실전 코치, 마이페이지 등
   - Firebase와 통신: Auth/Firestore/Storage
   - AI 호출 시: Python Function HTTPS 엔드포인트로 요청

2. **Firebase**
   - Auth: 이메일/비밀번호 + (선택) 구글/애플 로그인
   - Firestore: 도메인 데이터 저장
   - Storage: PDF 리포트/썸네일/이미지 저장
   - Functions: 스케줄링 & 트리거 (주간 리포트 등)

3. **Python AI Server (Cloud Functions / Cloud Run)**
   - 엔드포인트 예시:
     - `POST /simulate-turn`
     - `POST /analyze-chat`
     - `POST /generate-weekly-report`
   - 내부에서 openai 호출 → 결과 가공 후 반환

### 2-2. 주요 데이터 흐름 (Flow)

#### (1) 연애 카톡 시뮬레이터 턴 처리
1. 유저가 Flutter에서 문장 입력 → `sendTurn()` 호출
2. Flutter가 Firestore에 `message` 문서(유저 발화)를 먼저 저장
3. 동시에 Python AI 서버 `/simulate-turn` 호출 (body: userId, sessionId, recentMessages 등)
4. Python이:
   - 시나리오/캐릭터 정보 Firestore에서 조회(또는 캐시)
   - 프롬프트 생성 후 ChatGPT 호출
   - AI 대답 + 코치 피드백 + 호감도 변화 + 태그 생성
5. Python이 JSON으로 응답 → Flutter 수신
6. Flutter가 응답 내용을 Firestore에 `message` + `coach`로 저장 & UI 업데이트
7. 세션이 끝나면(턴 10~15): 최종 호감도/엔딩 타입 계산하여 Firestore `session_summary` 생성

#### (2) 실전 카톡 코칭
1. 유저가 카톡 대화 텍스트를 붙여넣고 "분석하기" 버튼 클릭
2. Flutter → Python `/analyze-chat`로 텍스트 전송
3. Python이:
   - 전체 대화 흐름 분석 (분위기/주도권/호감도 추정)
   - 문장별 코멘트 & 수정 문장 생성
   - “다음 멘트 3~5개” 추천 생성
4. 응답 JSON을 Flutter가 받아서 UI로 렌더링
5. (유료 기능인 경우) 분석 기록을 Firestore `real_chat_analysis`에 저장

#### (3) 주간 리포트 & 레벨/뱃지
1. Firebase Scheduled Function (혹은 Python 쪽 cron)에서 주간 1회 트리거
2. 해당 주에 유저가 플레이한 시뮬레이터/실전 코칭 기록 Firestore에서 조회
3. Python `/generate-weekly-report` 호출 → 텍스트 리포트/요약 생성
4. 결과를 Firestore `weekly_report`에 저장, 필요시 푸시 알림 발송

---

## 3. 데이터 모델 설계 (Firestore 컬렉션)

### 3-1. users
```json
users/{userId} {
  "nickname": "감자",
  "createdAt": Timestamp,
  "gender": "M" | "F" | null,
  "birthYear": 1998 | null,
  "preferredStyle": ["직진형", "안전형"],
  "level": 5,
  "xp": 1320,
  "subscriptionPlan": "free" | "basic" | "pro",
  "subscriptionExpireAt": Timestamp | null,
  "totalSessions": 42,
  "totalRealCoaching": 8,
  "lastLoginAt": Timestamp
}
```

### 3-2. scenarios (시나리오 마스터)
```json
scenarios/{scenarioId} {
  "category": "소개팅" | "썸" | "커플" | "갈등" | "고백" | "재회" | "이별" | "직장" | "친구가족" | "기타",
  "title": "소개팅 다음날 연락해도 될까?",
  "description": "소개팅 후 첫 연락을 어떻게 시작할지 모르는 상황",
  "difficulty": "easy" | "medium" | "hard",
  "estimatedTurns": 12,
  "tags": ["첫연락", "소개팅"],
  "isPremium": true/false,
  "enabled": true,
  "createdAt": Timestamp
}
```

### 3-3. characters (AI 캐릭터 마스터)
```json
characters/{characterId} {
  "name": "츤데레 오빠",
  "gender": "M" | "F" | "N",
  "style": ["츤데레", "장난", "솔직"],
  "description": "말투는 퉁명스럽지만 관심 많음",
  "basePromptProfile": "...캐릭터 정의용 프롬프트 텍스트...",
  "unlockCondition": "free" | "premium" | "level>=5" | "event",
  "thumbnailUrl": "...",
  "enabled": true
}
```

### 3-4. sessions (시뮬레이터 플레이 세션)
```json
sessions/{sessionId} {
  "userId": "...",
  "scenarioId": "...",
  "characterId": "...",
  "status": "ongoing" | "ended",
  "currentTurn": 5,
  "maxTurns": 12,
  "currentScore": 68,  // 현재 호감도
  "startAt": Timestamp,
  "endAt": Timestamp | null,
  "endingType": "A" | "B" | "C" | "BAD" | null
}
```

### 3-5. session_messages (세션 내 메시지들)
```json
sessions/{sessionId}/messages/{messageId} {
  "sender": "user" | "ai",
  "text": "오늘 만난 거 재밌었어요 :)",
  "createdAt": Timestamp,
  "turnIndex": 3,
  "coach": {               // ai일 때 or user 발화 이후 코치 결과
    "deltaScore": 8,
    "tags": ["공감 좋음", "질문 포함"],
    "comment": "상대의 하루를 궁금해해 준 점이 좋아요.",
    "suggestedAlternatives": [
      "오늘 얘기한 거 생각나서 웃겼어요 ㅋㅋ",
      "집 가는 길에 생각나서 연락해봤어요 :)"
    ]
  }
}
```

### 3-6. session_summaries (엔딩/리포트)
```json
session_summaries/{sessionId} {
  "userId": "...",
  "scenarioId": "...",
  "characterId": "...",
  "finalScore": 82,
  "endingType": "A",
  "strengths": ["질문 잘함", "공감 표현 좋음"],
  "weaknesses": ["가끔 장문", "직접적인 감정 표현 부족"],
  "summaryText": "소개팅 다음 날, 가볍게 안부를 묻고 자연스럽게 다음 약속까지 이어간 대화입니다.",
  "createdAt": Timestamp,
  "reportPdfUrl": "..." | null
}
```

### 3-7. real_chat_analysis (실전 카톡 분석 기록)
```json
real_chat_analysis/{analysisId} {
  "userId": "...",
  "rawText": "...유저가 붙여넣은 대화 전문...",
  "partnerType": "썸" | "연인" | "직장" | "친구가족" | "기타",
  "overallMood": "positive" | "negative" | "neutral" | "mixed",
  "dominance": "user" | "partner" | "balanced",
  "estimatedScore": 71,
  "keyRisks": ["사과 부족", "질문 적음"],
  "keyStrengths": ["상대 말 잘 받아줌"],
  "nextMessageSuggestions": ["...", "..."],
  "createdAt": Timestamp
}
```

#### 3-7-1. real_chat_analysis_messages (문장별 피드백)
```json
real_chat_analysis/{analysisId}/messages/{messageId} {
  "sender": "user" | "partner",
  "originalText": "ㅋㅋㅋㅋ",
  "comment": "이 이모티콘이 과하게 가벼워 보일 수 있어요.",
  "suggestedText": "ㅋㅋ 대신 '그때 진짜 웃겼어요'처럼 구체적으로 말해보는 것도 좋아요.",
  "tags": ["장난", "가벼움"],
  "index": 5
}
```

### 3-8. gamification 컬렉션 (레벨/뱃지/미션)

- `user_stats/{userId}`
- `user_badges/{userId}/badges/{badgeId}`
- `user_missions/{userId}/missions/{missionId}`
- `weekly_reports/{userId}/reports/{reportId}`

(필요 시 상세 스키마 더 정의)

---

## 4. Python AI 서버 설계

### 4-1. 엔드포인트 설계 (예시)

#### 4-1-1. `POST /simulate-turn`
- **설명**: 시뮬레이터에서 한 턴 진행할 때 호출
- **요청 바디 예시**
```json
{
  "userId": "abc123",
  "sessionId": "sess_001",
  "scenarioId": "sc_intro_nextday",
  "characterId": "ch_tsundere_male",
  "currentScore": 68,
  "turnIndex": 4,
  "history": [
    {"sender": "user", "text": "오늘 재밌었어요"},
    {"sender": "ai", "text": "나도 재밌었어 ㅋㅋ"}
  ],
  "userMessage": "집 잘 들어갔어?"
}
```
- **응답 예시**
```json
{
  "aiReply": "응 잘 들어갔지 ㅎㅎ 너는? 집까지 멀지 않았어?",
  "deltaScore": 10,
  "tags": ["안부", "질문 포함", "부담 적음"],
  "coachComment": "상대의 상태를 먼저 물어본 점이 좋습니다. 다만 약간의 농담을 섞어도 좋아요.",
  "suggestedAlternatives": [
    "집 잘 들어갔어? 오늘 얘기한 거 생각나서 아직도 웃겨 ㅋㅋ",
    "무사 귀가했어? 오늘 시간 진짜 빨리 갔지?"
  ],
  "endingType": null,
  "isSessionEnd": false
}
```

#### 4-1-2. `POST /analyze-chat`
- **설명**: 실전 카톡 복붙 분석
- **요청 바디 예시**
```json
{
  "userId": "abc123",
  "rawText": "[나] 오늘 뭐해?
[상대] 그냥 집이야...
[나] 아 그렇구나...",
  "contextType": "썸"
}
```
- **응답 예시(요약)**
```json
{
  "overallMood": "neutral",
  "dominance": "user",
  "estimatedScore": 55,
  "keyRisks": ["질문 다양성 부족", "대화를 이어가는 시도 부족"],
  "keyStrengths": ["상대 기분을 해치진 않음"],
  "nextMessageSuggestions": [
    "오늘 집에서 뭐하고 있었어? 영화 보거나 게임해?",
    "주말에는 주로 뭐해? 밖에 자주 나가는 편이야?"
  ],
  "messageFeedback": [
    {
      "sender": "user",
      "originalText": "오늘 뭐해?",
      "comment": "너무 나쁘진 않지만, 맥락이 없이 튀어나온 느낌일 수 있어요.",
      "suggestedText": "오늘 하루 어땠어? 지금은 뭐하고 있어?",
      "tags": ["질문", "맥락 부족"]
    }
  ]
}
```

#### 4-1-3. `POST /generate-weekly-report`
- **설명**: 특정 유저의 한주 대화 기록 요약
- **입력**: userId + 그 주 세션/분석 데이터 요약
- **출력**: 주간 리포트 텍스트 + 추천 학습 포인트

---

### 4-2. Python 내부 구조 (폴더)
```bash
ai-server/
  app.py              # FastAPI/Flask 엔트리
  models/
    schemas.py        # Pydantic 스키마 (요청/응답)
  services/
    openai_client.py  # ChatGPT 호출 래퍼
    prompt_builder.py # 시나리오/캐릭터별 프롬프트 생성
    simulator_logic.py# 호감도 계산/엔딩 로직
    analysis_logic.py # 실전 카톡 분석/태깅 로직
  config.py           # 환경변수, OpenAI 키, Firebase 프로젝트 설정
  utils/
    firestore_client.py
    logger.py
```

### 4-3. 프롬프트 설계 개요
- **입력 요소**:
  - 시나리오 설명
  - 캐릭터 프로필(말투/성격/금지 표현)
  - 이전 대화 히스토리
  - 현재 호감도/턴 번호
- **출력 포맷 강제**:
  - JSON 형태 문자열을 반환하도록 프롬프트에 명시
```text
You are an AI that outputs ONLY valid JSON. Structure:
{
  "aiReply": "...",
  "deltaScore": 0~20,
  "tags": ["..."],
  "coachComment": "...",
  "suggestedAlternatives": ["...", "..."]
}
```
- Python에서 `json.loads()`로 파싱 실패하면 재시도 로직 작성.

---

## 5. Flutter 앱 구조 설계

### 5-1. 폴더 구조 예시
```bash
lib/
  main.dart
  core/
    theme/
    widgets/
    utils/
  features/
    auth/
    onboarding/
    simulator/
    realcoach/
    scenarios/
    profile/
    store/
  services/
    firebase_service.dart
    ai_service.dart
  state/
    # Riverpod or Bloc 등 상태관리
```

### 5-2. 주요 화면
- `SplashScreen`
- `OnboardingScreen`
- `LoginScreen` (Firebase Auth 연동)
- `HomeScreen` (카테고리/상황 선택)
- `SimulatorScreen` (카톡 UI + 코치 패널)
- `ResultReportScreen` (엔딩 요약 + 점수)
- `RealChatCoachScreen` (붙여넣기 + 분석 결과)
- `LibraryScreen` (멘트 라이브러리)
- `ProfileScreen` (레벨, 뱃지, 통계)

### 5-3. 상태관리 선택 (예: Riverpod)
- `SimulatorController`:
  - 현재 세션 정보, 현재 턴, 메시지 리스트, 로딩 상태
  - `sendUserMessage(text)` → Firestore 저장 → AI 호출 → 상태 업데이트
- `RealChatController`:
  - rawText, analysisResult, 로딩 상태 관리

### 5-4. Flutter ↔ Firebase ↔ Python 호출 흐름 코드 개념
```dart
final aiServiceProvider = Provider<AiService>((ref) {
  return AiService();
});

class AiService {
  final _client = http.Client();

  Future<SimulateTurnResponse> simulateTurn(SimulateTurnRequest req) async {
    final idToken = await FirebaseAuth.instance.currentUser?.getIdToken();
    final resp = await _client.post(
      Uri.parse('https://YOUR_AI_ENDPOINT/simulate-turn'),
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer $idToken',
      },
      body: jsonEncode(req.toJson()),
    );
    // 에러 처리 + json 파싱
  }
}
```

---

## 6. 보안 & 권한 설계

### 6-1. Firebase Security Rules 기본 원칙
- `users/{userId}`: 자기 것만 read/write 가능
- `sessions/{sessionId}`: `session.userId == request.auth.uid` 인 경우만 접근
- `real_chat_analysis`: 마찬가지로 owner만 접근
- `scenarios`, `characters`: read 모두 허용, write 관리자만 (서버에서만)

### 6-2. AI 서버 접근 제어
- 모든 AI 엔드포인트는 `Authorization: Bearer <Firebase ID Token>` 필수
- Python에서 Firebase Admin SDK로 토큰 검증
  - 유효하지 않으면 401 반환

### 6-3. 민감정보 처리
- 실전 카톡 분석 `rawText`는 가능한 **짧은 기간**만 저장 or 아예 저장 옵션 On/Off 제공
- 로그에는 실제 문장 그대로 남기지 않고 요약/태그만 남기는 옵션 고려

---

## 7. 배포/환경 전략

### 7-1. Firebase 프로젝트 구분
- `project-dev`: 개발용
- `project-prod`: 운영용

### 7-2. AI 서버 환경변수
- `OPENAI_API_KEY`
- `FIREBASE_PROJECT_ID`
- `ENV` (dev/prod)

### 7-3. 버전 관리
- Git flow: `main`, `develop`, `feature/*`
- 태그: `v0.1.0-mvp`, `v0.2.0-realchat`, ...

---

## 8. MVP 범위 정의 (V1 개발 스코프)

1. 필수 기능
   - Firebase 이메일 로그인
   - 상황 카테고리 3~5개 + 대표 시나리오 1개씩 (총 5~10개)
   - 캐릭터 2명 (다정형, 츤데레형)
   - 시뮬레이터 10턴 내 왕복 + A/B/C/BAD 엔딩
   - 기본 코치 피드백 (점수/간단 태그/멘트 1~2개)
   - 세션 리포트 화면

2. AI 로직 제한
   - 프롬프트를 최대한 단순하게 구성 (캐릭터/시나리오 기본 정보 + 히스토리)
   - 태그 타입도 5~10개 소규모로 시작

3. 비기능
   - iOS/Android 동시 빌드
   - 오류 로깅(Sentry 등) 연동

---

## 9. V2/V3 확장 시 개발 포인트

- V2: 실전 카톡 코칭 풀 기능
  - `/analyze-chat` 고도화
  - 문장별 피드백 + 수정 멘트 UI
  - 분석 히스토리 및 주간 리포트 생성
- V3: 직장/친구/가족 탭 분리 + 멀티 도메인 모델링
  - 시나리오 카테고리 확장
  - 템플릿/멘트 라이브러리 검색 기능

---

## 10. 요약
- Flutter는 **UI + 로직 얇게** (Firebase + Python 호출)
- Firebase는 **인증/데이터/보안/스케줄/푸시** 담당
- Python은 **AI 두뇌**로, 시뮬레이터 턴/실전 코칭/리포트의 핵심 로직 담당

이 개발 기획서 기준으로:
- 바로 **와이어프레임 → 데이터베이스 실제 컬렉션 생성 → Python 엔드포인트 뼈대 → Flutter 화면 스캐폴딩** 순서로 작업 들어가면 됨.


---

# 15. Firestore DB 상세 설계 (전체 컬렉션 + 모든 필드 + 인덱스)
본 섹션은 기존 DB 설계를 **완전히 확장**하여 운영 단계까지 고려한 수준으로 디테일하게 작성함.

## 15-1. 전체 컬렉션 구조 개요
```
/users
/scenarios
/characters
/sessions
/sessions/{sessionId}/messages
/session_summaries
/real_chat_analysis
/real_chat_analysis/{analysisId}/messages
/user_stats
/user_badges
/user_badges/{userId}/badges
/user_missions
/user_missions/{userId}/missions
/weekly_reports
/ai_prompt_profiles (추가)
/ai_system_logs (추가)
```

---

# 15-2. users 컬렉션 (유저 프로필)
```json
users/{userId} {
  "nickname": "감자",
  "gender": "M" | "F" | "N" | null,
  "birthYear": 1998 | null,
  "level": 5,
  "xp": 1320,
  "preferredCharacterStyle": ["다정", "츤데레"],
  "subscriptionPlan": "free" | "basic" | "pro",
  "subscriptionExpireAt": Timestamp | null,
  "createdAt": Timestamp,
  "lastLoginAt": Timestamp,
  "deleted": false
}
```
### 인덱스
- `subscriptionPlan`, `level`, `lastLoginAt` 조합 인덱스
- `deleted == false` 필터용 인덱스

---

# 15-3. scenarios (상황/스토리 마스터)
시나리오의 대규모 추가를 고려해 **버전 관리**, **Premium Flag**, **난이도**, **스토리 가이드**까지 포함.

```json
scenarios/{scenarioId} {
  "title": "소개팅 다음날 연락해도 될까?",
  "category": "소개팅",
  "difficulty": "easy" | "medium" | "hard",
  "estimatedTurns": 12,
  "isPremium": false,
  "storyGuide": {
    "goal": "자연스러운 첫 연락 + 다음 대화 이어가기",
    "avoid": ["장문", "과한 질문", "감정 과다 노출"],
    "mustDo": ["가벼운 안부", "질문 1개 이상"],
    "recommendedTone": "밝고 부담 없는 톤"
  },
  "openingLines": ["어제 만나서 반가웠어요!"],
  "createdAt": Timestamp,
  "updatedAt": Timestamp,
  "enabled": true
}
```

---

# 15-4. characters (AI 캐릭터 마스터)
추가로 캐릭터별 금지 표현, 말투 특징, 대답 길이/속도 스타일을 정의.

```json
characters/{characterId} {
  "name": "츤데레 남자",
  "gender": "M",
  "style": ["츤데레", "솔직", "장난"],
  "toneSettings": {
    "emojiUsage": "low" | "medium" | "high",
    "speed": "fast" | "normal" | "slow",
    "directness": "high" | "medium" | "low",
    "averageLength": 25
  },
  "bannedPhrases": ["하..", "모르겠다"],
  "basePromptProfile": "(캐릭터의 성격/말투 정의용 텍스트)",
  "unlockCondition": "free" | "premium" | "level>=5",
  "thumbnailUrl": "...",
  "enabled": true,
  "createdAt": Timestamp
}
```

---

# 15-5. sessions (플레이 세션)
```json
sessions/{sessionId} {
  "userId": "...",
  "scenarioId": "...",
  "characterId": "...",
  "status": "ongoing" | "ended",
  "currentTurn": 4,
  "maxTurns": 12,
  "currentScore": 45,
  "startAt": Timestamp,
  "endAt": Timestamp | null,
  "endingType": null | "A" | "B" | "C" | "BAD",
  "platform": "android" | "ios" | "web"
}
```

### 세션 인덱스
- `userId + startAt`  
- `endingType + scenarioId`

---

# 15-6. session_messages (턴 메시지)
```json
sessions/{sessionId}/messages/{messageId} {
  "sender": "user" | "ai",
  "text": "집 잘 들어갔어?",
  "turnIndex": 3,
  "createdAt": Timestamp,
  "coach": {
    "deltaScore": 8,
    "tags": ["안부", "부담 적음"],
    "comment": "안부 먼저 물은 것이 좋아요.",
    "suggestedAlternatives": ["...", "..."]
  }
}
```

---

# 15-7. real_chat_analysis (실전 카톡 분석)
```json
real_chat_analysis/{analysisId} {
  "userId": "...",
  "contextType": "썸" | "연애" | "직장" | "친구가족" | "기타",
  "overallMood": "positive" | "negative" | "neutral" | "mixed",
  "dominance": "user" | "partner" | "balanced",
  "estimatedScore": 72,
  "keyRisks": ["사과 부족"],
  "keyStrengths": ["상대가 한 말 잘 받아줌"],
  "nextMessageSuggestions": ["..."] ,
  "rawTextSummary": "요약된 본문",
  "createdAt": Timestamp
}
```

문장별 분석:
```json
real_chat_analysis/{analysisId}/messages/{msgId} {
  "sender": "user" | "partner",
  "originalText": "ㅋㅋㅋ",
  "comment": "가벼워 보일 수 있음",
  "suggestedText": "그때 진짜 웃겼어!",
  "tags": ["장난 많음"],
  "index": 2
}
```

---

# 15-8. gamification (레벨/뱃지/미션)
### user_stats
```json
user_stats/{userId} {
  "dailyPlayCount": 3,
  "weeklyPlayCount": 10,
  "totalPlayCount": 140,
  "totalRealCoach": 12,
  "streakDays": 5,
  "lastPlayAt": Timestamp
}
```

### user_badges
```json
user_badges/{userId}/badges/{badgeId} {
  "name": "연속 플레이 3일",
  "description": "3일 연속 시뮬레이터 실행",
  "earnedAt": Timestamp,
  "iconUrl": "..."
}
```

### user_missions
```json
user_missions/{userId}/missions/{missionId} {
  "title": "질문 3회 이상 포함하여 A엔딩 달성",
  "status": "done" | "progress",
  "progress": 2,
  "target": 3,
  "rewardXp": 150,
  "updatedAt": Timestamp
}
```

---

# 16. AI 프롬프트 설계 (캐릭터별 + 상황별 + 시뮬레이터 + 분석 전용)
이 섹션은 **AI 품질 전체를 결정하는 가장 중요한 구조**로,  
Production 단계에서 반드시 필요한 구성들을 모두 정리.

---

# 16-1. 공통 시스템 프롬프트 (모든 AI 호출 기본)
```text
당신은 인간관계/연애 커뮤니케이션 코치이자 시뮬레이션 캐릭터입니다.
항상 아래 규칙을 반드시 지킵니다.

[절대 규칙]
1. 절대 JSON 외의 텍스트를 출력하지 않는다.
2. 사용자의 말투를 있는 그대로 반영하되, 공격적/과한 표현은 정제한다.
3. 상대를 압박하거나 스토킹/가스라이팅 성격의 멘트는 금지.
4. 캐릭터 말투는 basePromptProfile을 기반으로 유지.
5. 시나리오의 상황/톤에 맞지 않는 멘트는 생성 금지.
6. 호감도(deltaScore)는 -10~+15 범위에서만 부여.
```

---

# 16-2. 시뮬레이터용 프롬프트 (simulate-turn)
Python에서 조합되는 구성:
- system prompt  
- character profile  
- scenario guide  
- conversation history  
- user message  
- 출력 포맷 규칙

### system
```text
You are an AI that outputs ONLY JSON with the following structure:
{
  "aiReply": "string",
  "deltaScore": number,
  "tags": ["string"],
  "coachComment": "string",
  "suggestedAlternatives": ["string"],
  "endingType": null | "A" | "B" | "C" | "BAD",
  "isSessionEnd": boolean
}
```

### character profile 조합
```text
[캐릭터 성격]
- 이름: {{character.name}}
- 성향: {{character.style}}
- 말투 특징:
  - 직설성: {{character.toneSettings.directness}}
  - 이모티콘 사용량: {{character.toneSettings.emojiUsage}}
  - 기본 호흡 속도: {{character.toneSettings.speed}}
- 금지 표현: {{character.bannedPhrases}}
```

### scenario context
```text
[상황 설명]
- 제목: {{scenario.title}}
- 목표: {{scenario.storyGuide.goal}}
- 피해야 할 표현: {{scenario.storyGuide.avoid}}
- 필수 요소: {{scenario.storyGuide.mustDo}}
- 추천 톤: {{scenario.storyGuide.recommendedTone}}
```

### history
```text
[이전 대화]
{{history}}
```

### user message
```text
[사용자 발화]
"{{userMessage}}"
```

### Output instruction
```text
반드시 위 JSON 형식으로만 대답하세요.
```

---

# 16-3. 실전 카톡 분석 프롬프트 (analyze-chat)
### system prompt
```text
너는 연애/인간관계 대화 분석 전문가이다.
사용자가 붙여넣은 카톡 대화를 다음 기준으로 분석하라.
절대 JSON 이외 다른 텍스트를 출력하지 않는다.
```

### analysis instructions
```text
[분석 기준]
1. 전체 분위기: positive / negative / neutral / mixed 중 하나
2. 주도권(dominance): user / partner / balanced 중 하나
3. 위험 요소(keyRisks): 최대 5개
4. 강점(keyStrengths): 최대 5개
5. 다음에 보낼 멘트 추천: 3~5개
6. 대화 전체 요약 2~3줄
7. 문장별 분석: 각 문장에 대해 comment + suggestedText + tags
```

### Output JSON
```text
{
  "overallMood": "positive | negative | neutral | mixed",
  "dominance": "user | partner | balanced",
  "estimatedScore": number,
  "keyRisks": ["string"],
  "keyStrengths": ["string"],
  "nextMessageSuggestions": ["string"],
  "summary": "string",
  "messageFeedback": [
    {
      "sender": "user | partner",
      "originalText": "string",
      "comment": "string",
      "suggestedText": "string",
      "tags": ["string"]
    }
  ]
}
```

---

# 16-4. 호감도 로직 (deltaScore) 설계
### 기본 규칙
- 범위: **-10 ~ +15**
- 곱연산: 캐릭터 선호도에 따라 가중치 적용

예:
```
기본 점수: +5 (안부/질문 포함)
캐릭터 선호도(질문 선호=+20%): +1
시나리오 위험요소(장문 금지 위반=-30%): -2
총합: +4
```

---

# 17. Python 내부 프롬프트 빌더 모듈 설계
`prompt_builder.py` 의 책임:
- scenario + character + history + userMessage 조합해 완성 prompt 반환
- JSON 출력 강제 문구 포함
- banned phrases 필터링

### build_simulation_prompt()
입력:
- scenarioData
- characterData
- historyList
- userMessage

출력:  
LLM 호출용 최종 문자열

### build_analysis_prompt()
입력:
- rawText
- contextType

출력:  
대화 분석용 프롬프트

---

# 18. 인프라 추가 설계
- Cloud Functions Memory: 1GB, Timeout: 60초
- OpenAI 호출 실패 시 재시도(3회)
- 프롬프트 버전 관리: `/ai_prompt_profiles` 에 version 필드 포함
- 오류 발생 자동 로깅 → `/ai_system_logs`

---

# 19. 결론
이 확장 섹션은 다음 내용을 기존 문서에 완전 통합함:
- Firestore 전체 구조(운영 레벨)
- 모든 컬렉션/필드 정의
- AI 프롬프트 전체 설계(시나리오/캐릭터/분석)
- Python 프롬프트 조합 모듈 설계
- deltaScore / 위험 요소 / 태그 로직

필요 시 다음 단계도 즉시 제작 가능:
- **“전체 Python 코드 스캐폴딩”**
- **“Flutter 화면 와이어프레임”**
- **“시나리오별 프롬프트 30종 실제 작성”**
- **“엔딩 로직 상세 테이블”**


---

# 20. 실제 서비스에 바로 넣을 수 있는 **시나리오 30종 스크립트 세트** (V1~V3 확장형)
> ⚠️ 주의: 이 시나리오들은 **AI 프롬프트에 직접 연결 가능하도록**  
> “상황 설명 / 오프닝 / 목표 / 위험 요소 / 톤 가이드 / 금지 패턴 / 진행 흐름”  
> 형태로 구성됨.  
> 즉 → 그대로 Firebase `scenarios` 컬렉션에 넣고 사용할 수 있음.

---

# 📌 카테고리 구성 (총 8개)
1. **소개팅** (5종)  
2. **썸 단계** (6종)  
3. **커플** (5종)  
4. **갈등/서운함** (4종)  
5. **고백/진전** (3종)  
6. **재회/이별** (3종)  
7. **직장/업무 커뮤니케이션** (2종)  
8. **친구/가족 관계** (2종)

총 **30개 시나리오**.

---

# ==============================
# ① 소개팅 시나리오 (5종)
# ==============================

---
## **1. 소개팅 다음날 – 첫 연락 어떻게 할까?**
**id:** `sc_intro_dayafter`  
**난이도:** easy  
**목표:** 부담 없이 첫 대화 시작 + 자연스럽게 이어가기  
**오프닝 예시:**  
- "어제 집 잘 들어가셨나요?"  
- "어제 만나서 반가웠어요 :)"

**진행 흐름:**
1. 가벼운 안부 → 상대 가장 최근 경험 공감  
2. 어색함 줄이는 취미/일상 질문  
3. 상대 반응이 좋으면 다음 대화로 연결  
4. 무거운 감정표현 금지

**위험 요소:** 장문, 과한 감정, 너무 적극적인 약속 언급

**추천 톤:** 밝고 가벼움

---
## **2. 소개팅 직후 – 첫 느낌 공유 시나리오**
**id:** `sc_intro_firstimpression`  
**난이도:** medium  
**목표:** 긍정적인 첫인상 공유 + 과하지 않게 호감 신호 보내기

**오프닝:**
- "오늘 시간 진짜 재밌었어요 ㅎㅎ"

**흐름:**
1. 첫인상 관찰 공유
2. 과하지 않게 칭찬 1회
3. 상대 반응 살피기

**위험 요소:** 과한 칭찬

---
## **3. 소개팅 3일차 – 템포 관리**
**id:** `sc_intro_temposet`  
**난이도:** medium

**목표:** 너무 자주/너무 뜸한 연락 사이 밸런스 잡기

**오프닝:**
- "퇴근했어요? 오늘 하루 어땠어요?"

**흐름:**
1. 일상교류
2. 질문 하나 + 공유 하나
3. 상대가 부담 느끼지 않도록 가벼운 리액션

---
## **4. 소개팅 후 첫 커피 제안**
**id:** `sc_intro_firstcoffee`  
**난이도:** medium-high

**목표:** 자연스러운 첫 약속 제안

**오프닝:**
- "지난번에 말한 카페 근처에 있어서 생각났어요 ㅎㅎ"

**흐름:**
1. 이전 대화 중 ‘키워드’ 회상
2. 연결성 있는 자연스러운 제안
3. 강요 없이 여지 주기

**위험 요소:** 확답 요구, 강한 어조

---
## **5. 소개팅 상대가 답이 느릴 때**
**id:** `sc_intro_slowreply`  
**난이도:** hard

**목표:** 불안 티 내지 않고 부드러운 템포 조절

**금지:** 왜 답 늦냐 묻기, 감정 섞기

**오프닝:**
- "바쁠텐데 답장 고마워요 :)"

---

# ==============================
# ② 썸 단계 시나리오 (6종)
# ==============================

---
## **6. 썸 1주차 – 일상 공유 시작**
**id:** `sc_some_week1_daily`  
**난이도:** easy

**목표:** 가벼운 일상 루틴 공유

**오프닝:**
- "오늘 점심 뭐 먹었어요?"

---
## **7. 썸 2주차 – 호감 명확해지는 시기**
**id:** `sc_some_week2_vibes`  
**난이도:** medium

**목표:** 은근한 호감 표현 → 과하지 않게  
**오프닝:**  
- "요즘 대화하다 보면 시간 빨리 가는 느낌이네요 ㅎㅎ"

---
## **8. 썸 – 장난/유머 템포 잡기**
**id:** `sc_some_jokes`  
**난이도:** medium

**목표:** 장난 ↔ 진지함 균형

**위험 요소:** 장난 과다 → 호감도 급락

---
## **9. 썸 – ‘오늘 뭐했어?’ 반복 피하기**
**id:** `sc_some_notboring`  
**난이도:** medium

**목표:** 대화 다양성 + 깊이 확보

**전략:**
- 주제 확장  
- 이전 대화 연결 포인트 사용

---
## **10. 썸 – 다음 약속 자연스럽게 만들기**
**id:** `sc_some_nextdate`  
**난이도:** medium-high

**오프닝:**
- "지난번 얘기한 전시회 이번 주에 열리던데 ㅎㅎ"

**금지:** 확답 압박

---
## **11. 썸 – 답장이 뚝 끊길 때 복구하기**
**id:** `sc_some_recover`  
**난이도:** hard

**전략:**
- 가벼운 주제 리오픈  
- “왜 답 안 함?” 절대 금지

---

# ==============================
# ③ 커플 시나리오 (5종)
# ==============================

---
## **12. 커플 – 하루 루틴 대화 심화**
**id:** `sc_couple_dailydeep`  
**난이도:** easy

**목표:** 감정 공유 깊이 확장

---
## **13. 커플 – 서운함 없이 바운더리 말하기**
**id:** `sc_couple_boundary`  
**난이도:** medium

**목표:** 기분 상하게 하지 않는 톤의 표현

**금지:** “왜 항상…”, “너는 맨날…”

---
## **14. 커플 – 기념일/이벤트 대화**
**id:** `sc_couple_event`  
**난이도:** medium

---
## **15. 커플 – 바쁜 시기의 대화 템포 조절**
**id:** `sc_couple_busy`  
**난이도:** medium

**목표:** 부담 없는 응원/위로 톤

---
## **16. 커플 – 작은 갈등 직후 분위기 회복**
**id:** `sc_couple_recover`  
**난이도:** medium-high

---

# ==============================
# ④ 갈등/서운함 시나리오 (4종)
# ==============================

---
## **17. 문자 늦어서 서운한 상황**
**id:** `sc_conflict_late_reply`  
**난이도:** medium

**목표:** 감정 전달 + 책임 전가 금지

---
## **18. 만남 계획 어긋나서 갈등**
**id:** `sc_conflict_planbreak`  
**난이도:** high

**위험 요소:** 비난/책임몰기

---
## **19. 상대에게 실수했을 때 사과**
**id:** `sc_conflict_apology`  
**난이도:** high

**오프닝:**
- "어제 내가 좀 예민했어. 미안해."

---
## **20. 감정 상한 상태에서 관계 복원**
**id:** `sc_conflict_rebuild`  
**난이도:** very-hard

**목표:** 방어적 태도 최소화

---

# ==============================
# ⑤ 고백/진전 시나리오 (3종)
# ==============================

---
## **21. 썸 → 고백 직전 분위기 만들기**
**id:** `sc_confession_pre`  
**난이도:** medium-high

**전략:**
- 공감/공유 비중 증가
- 감정 언급은 “조심스럽게”

---
## **22. 고백 멘트 시나리오**
**id:** `sc_confession_main`  
**난이도:** hard

**목표:** 깔끔한 문장 + 질질 끌지 않기

---
## **23. 고백 후 다음 흐름 만들기**
**id:** `sc_confession_post`  
**난이도:** medium

**점검:** 상대의 부담 체크

---

# ==============================
# ⑥ 재회/이별 시나리오 (3종)
# ==============================

---
## **24. 잠수/거리감 생긴 관계 복구**
**id:** `sc_reconnect_ghost`  
**난이도:** hard

---
## **25. 이별 직후 차분한 정리 대화**
**id:** `sc_breakup_clean`  
**난이도:** very-hard

**금지:** 감정 폭발, 비난, 집착 표현

---
## **26. 재회 시도 – 첫 메세지**
**id:** `sc_reunion_first`  
**난이도:** very-hard

**전략:**
- 쿨한 톤
- 미안함 프레임

---

# ==============================
# ⑦ 직장 커뮤니케이션 (2종)
# ==============================

---
## **27. 상사 보고 – 톤/매너 최적화**
**id:** `sc_work_report`  
**난이도:** medium

**목표:** 간결 + 예의 + 정보 명확성

---
## **28. 동료 갈등 정리**
**id:** `sc_work_conflict`  
**난이도:** medium-high

**금지:** 감정적 단어

---

# ==============================
# ⑧ 친구/가족 관계 (2종)
# ==============================

---
## **29. 멀어진 친구에게 먼저 연락**
**id:** `sc_friend_distant`  
**난이도:** medium

**오프닝:**
- "요즘 너 생각나더라. 잘 지내지?"

---
## **30. 가족과 갈등 조정**
**id:** `sc_family_conflict`  
**난이도:** hard

**목표:** 감정 완화 + 메시지 명확성

---

# ==============================
# ✔️ 이제 무엇이 가능해졌나?
- 이 30종은 그대로 Firebase에 넣어서 **AI 시나리오 선택 화면 구성** 가능
- 각 시나리오마다 **프롬프트 시스템에 자동으로 연결 가능**
- 캐릭터/톤/금지 패턴/턴 구성까지 이미 구조화되어 있음

원하면 다음 단계로:
👉 **각 시나리오별 “오프닝 턴 1~5 실제 대화 예시”** 만들어줄 수 있음 (초실전용)  
👉 또는 **프리미엄 패키지용 시나리오 20개 추가**도 가능

